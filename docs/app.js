!function(){"use strict";var c,r,e,n,u,t,o,v,s,f,i,a,m;c=function(c){return document.getElementById(c)},e={method:"v12",risk:{curr:"0"},safe:{curr:"0"},flower:{c0:{v:!1,m:["c1-0","c1-1","c1-2","c1-3","c1-4","c1-5"]},"c1-0":{v:!1,m:["c3-0","c2-1","c1-1","c0","c1-5","c2-0"]},"c1-1":{v:!1,m:["c2-1","c3-1","c2-2","c1-2","c0","c1-0"]},"c1-2":{v:!1,m:["c1-1","c2-2","c3-2","c2-3","c1-3","c0"]},"c1-3":{v:!1,m:["c0","c1-2","c2-3","c3-3","c2-4","c1-4"]},"c1-4":{v:!1,m:["c1-5","c0","c1-3","c2-4","c3-4","c2-5"]},"c1-5":{v:!1,m:["c2-0","c1-0","c0","c1-4","c2-5","c3-5"]},"c2-0":{v:!1,m:["c2-4","c3-0","c1-0","c1-5","c3-5","c2-2"]},"c2-1":{v:!0,v4:!1,m:["c2-3","c2-5","c3-1","c1-1","c1-0","c3-0"]},"c2-2":{v:!0,v4:!1,m:["c3-1","c2-4","c2-0","c3-2","c1-2","c1-1"]},"c2-3":{v:!1,m:["c1-2","c3-2","c2-5","c2-1","c3-3","c1-3"]},"c2-4":{v:!0,v4:!1,m:["c1-4","c1-3","c3-3","c2-0","c2-2","c3-4"]},"c2-5":{v:!0,v4:!1,m:["c3-5","c1-5","c1-4","c3-4","c2-1","c2-3"]},"c3-0":{v:!1,m:["c3-3","c3-5","c2-1","c1-0","c2-0","c3-1"]},"c3-1":{v:!0,v4:!0,m:["c3-2","c3-4","c3-0","c2-2","c1-1","c2-1"]},"c3-2":{v:!1,m:["c2-2","c3-3","c2-5","c3-1","c2-3","c1-2"]},"c3-3":{v:!1,m:["c1-3","c2-3","c3-4","c3-0","c3-2","c2-4"]},"c3-4":{v:!0,v4:!0,m:["c2-5","c1-4","c2-4","c3-5","c3-1","c3-3"]},"c3-5":{v:!1,m:["c3-4","c2-0","c1-5","c2-5","c3-0","c3-2"]}},probs:{risk:[(r={2:1/36,3:1/18,4:1/12,5:1/9,6:5/36,7:1/6,8:5/36,9:1/9,10:1/12,11:1/18,12:1/36})[8]+r[9],r[6]+r[7],r[4]+r[5],r[2]+r[3],r[12],r[10]+r[11]],safe:[r[2]+r[3],r[12],r[10]+r[11],r[8]+r[9],r[6]+r[7],r[4]+r[5]]}},n=function(){var c,r,n,u,t,i,a,m;for(a in c=function(c,r,n){var u,t,o,v=[];for(u=0;u<6;++u)t=u,o=c[r].old*e.probs[r][t],v.push(e.flower[n[t]][r].curr+=o);return v},r=function(r,n){var t,o,v,s,i,a,m,l=[];for(t="risk"===r?"c1-1":"c1-4",o=0;o<=n;++o){if(v=[],0===o)v.push(e.flower[t][r].curr=1);else for(s in f(r),i=e.flower)a=i[s],0!==e.flower[s][r].old&&(m=u(a),v.push(c(a,r,m)));l.push(v)}return l},n=function(c,r){var e,n,u,t,o=[];for(e=0,n=c.length;e<n;++e)u=e,t=c[e],1===u?o.push("c1-"+r):o.push(t);return o},u=function(c){switch(e.method){case"v3":return c.v?n(c.m,1):c.m;case"v4":return c.v&&c.v4?n(c.m,1):c.m;case"v12":return c.m}},t=function(c){var r,e;return r="risk"===c?"up":"dn",document.querySelector("#"+a+" text."+r).innerHTML=v(c,a),(e=document.querySelector("#"+a+" .base."+r)).style.fill=o(c,a),e.style.strokeWidth=(0===m[c].curr?0:1)+"px"},s(),r("risk",(i=e.risk.curr)<10?i:10),r("safe",(i=e.safe.curr)<10?i:10),i=e.flower)m=i[a],t("risk"),t("safe")},u=function(c){e.method=c,n()},t=function(r){var n;return n=c(r+"-moves"),e[r].curr=/^[0-9]{0,2}$/.test(n.value)?n.value:e[r].curr,n.value=e[r].curr},o=function(c,r){var n,u,t;return u=(n=e.flower[r][c].curr)<.5?255:Math.round(255*(1-n)),t=n>=.5?0:Math.round(255*(1-2*n)),"risk"===c?"rgb("+u+","+t+","+t+")":"rgb("+t+","+u+","+t+")"},v=function(c,r){return Math.round(1e4*e.flower[r][c].curr)/100+"%"},s=function(){var c,r,n=[];for(c in e.flower)n.push(((r=e.flower[c]).risk={old:0,curr:0},r.safe={old:0,curr:0},r));return n},f=function(c){var r,n=[];for(r in e.flower)e.flower[r][c].old=e.flower[r][c].curr,n.push(e.flower[r][c].curr=0);return n},i=function(c){t("risk"),n()},a=function(c){t("safe"),n()},m=function(){c("risk-moves").addEventListener("change",i),c("risk-moves").addEventListener("keyup",(function(c){return c.target.value=e.risk.curr})),c("safe-moves").addEventListener("change",a),c("safe-moves").addEventListener("keyup",(function(c){return c.target.value=e.safe.curr})),n()},window.changeMethod=u,window.init=m,window.store=e}();
